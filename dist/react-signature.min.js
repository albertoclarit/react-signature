!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,i.ReactSignature=t()}}(function(){return function t(i,n,e){function o(r,h){if(!n[r]){if(!i[r]){var a="function"==typeof require&&require;if(!h&&a)return a(r,!0);if(s)return s(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[r]={exports:{}};i[r][0].call(c.exports,function(t){var n=i[r][1][t];return o(n?n:t)},c,c.exports,t,i,n,e)}return n[r].exports}for(var s="function"==typeof require&&require,r=0;r<e.length;r++)o(e[r]);return o}({1:[function(t,i,n){(function(e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,s,r="undefined"!=typeof window?window.React:"undefined"!=typeof e?e.React:null,h=t("./points_util.js"),a=t("./bezier_util.js"),u=(r.PropTypes,.7),c=.5,l=2.5,f=1.5,d="black",p=!1,y=r.createClass({displayName:"ReactSignature",getDefaultProps:function(){return{width:450,height:300}},componentDidMount:function(){o=this.refs.canvas,s=o.getContext("2d")},handleClear:function(){s.clearRect(0,0,o.width,o.height),this.reset()},toDataURL:function(){return o.toDataURL.apply(o,arguments)},fromDataURL:function(t){var i=new Image,n=window.devicePixelRatio||1,e=o.width/n,r=o.height/n;this.reset(),i.src=t,i.onload=function(){s.drawImage(i,0,0,e,r)},this.isEmpty=!1},handleMouseDown:function(t){p=!0,this.strokeBegin(t)},handleMouseMove:function(t){p&&this.strokeUpdate(t)},handleMouseUp:function(t){p=!1,this.strokeEnd(t)},strokeUpdate:function(t){var i=this.createPoint(t);this.addPoint(i)},strokeBegin:function(t){this.reset(),this.strokeUpdate(t)},strokeDraw:function(t){s.beginPath(),this.drawPoint(t.x,t.y,f),s.closePath(),s.fill()},strokeEnd:function(t){var i=this.points.length>2,n=this.points[0];!i&&n&&this.strokeDraw(n)},createPoint:function(t){var i=o.getBoundingClientRect();return new h(t.clientX-i.left,t.clientY-i.top)},addPoint:function(t){var i,n,e,o;this.points.push(t),this.points.length>2&&(3===this.points.length&&this.points.unshift(this.points[0]),o=this.calculateCurveControlPoints(this.points[0],this.points[1],this.points[2]),i=o.c2,o=this.calculateCurveControlPoints(this.points[1],this.points[2],this.points[3]),n=o.c1,e=new a(this.points[1],i,n,this.points[2]),this.addCurve(e),this.points.shift())},addCurve:function(t){var i,n,e=t.startPoint,o=t.endPoint;i=o.velocityFrom(e),i=u*i+(1-u)*this.lastVelocity,n=this.strokeWidth(i),this.drawCurve(t,this.lastWidth,n),this.lastVelocity=i,this.lastWidth=n},calculateCurveControlPoints:function(t,i,n){var e=t.x-i.x,o=t.y-i.y,s=i.x-n.x,r=i.y-n.y,a={x:(t.x+i.x)/2,y:(t.y+i.y)/2},u={x:(i.x+n.x)/2,y:(i.y+n.y)/2},c=Math.sqrt(e*e+o*o),l=Math.sqrt(s*s+r*r),f=a.x-u.x,d=a.y-u.y,p=l/(c+l),y={x:u.x+f*p,y:u.y+d*p},x=i.x-y.x,w=i.y-y.y;return{c1:new h(a.x+x,a.y+w),c2:new h(u.x+x,u.y+w)}},isEmpty:function(){return this.isEmpty},reset:function(){this.points=[],this.lastVelocity=0,this.lastWidth=(this.minWidth+this.maxWidth)/2,this.isEmpty=!0,s.fillStyle=d},drawPoint:function(t,i,n){s.moveTo(t,i),s.arc(t,i,n,0,2*Math.PI,!1),this.isEmpty=!1},drawCurve:function(t,i,n){var e,o,r,h,a,u,c,l,f,d,p,y=n-i;for(e=Math.floor(t.length()),s.beginPath(),r=0;r<e;r++)h=r/e,a=h*h,u=a*h,c=1-h,l=c*c,f=l*c,d=f*t.startPoint.x,d+=3*l*h*t.control1.x,d+=3*c*a*t.control2.x,d+=u*t.endPoint.x,p=f*t.startPoint.y,p+=3*l*h*t.control1.y,p+=3*c*a*t.control2.y,p+=u*t.endPoint.y,o=i+u*y,this.drawPoint(d,p,o);s.closePath(),s.fill()},strokeWidth:function(t){return Math.max(l/(t+1),c)},render:function(){return r.createElement("canvas",{width:this.props.width,height:this.props.height,ref:"canvas",onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp})}});n["default"]=y,i.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./bezier_util.js":2,"./points_util.js":3}],2:[function(t,i,n){"use strict";var e=function(t,i,n,e){this.startPoint=t,this.control1=i,this.control2=n,this.endPoint=e};e.prototype.length=function(){var t,i,n,e,o,s,r,h,a=10,u=0;for(t=0;t<=a;t++)i=t/a,n=this.point(i,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),e=this.point(i,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y),t>0&&(r=n-o,h=e-s,u+=Math.sqrt(r*r+h*h)),o=n,s=e;return u},e.prototype.point=function(t,i,n,e,o){return i*(1-t)*(1-t)*(1-t)+3*n*(1-t)*(1-t)*t+3*e*(1-t)*t*t+o*t*t*t},i.exports=e},{}],3:[function(t,i,n){"use strict";var e=function(t,i,n){this.x=t,this.y=i,this.time=n||(new Date).getTime()};e.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):1},e.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},i.exports=e},{}]},{},[1])(1)});